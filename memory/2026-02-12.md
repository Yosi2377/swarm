# 2026-02-12 — Major Swarm Upgrades + Betting Project

## Poker (TexasPokerGame)
- Fixed: HTTPS on zozopoker.duckdns.org (certbot + nginx)
- Fixed: nginx was pointing to blackjack (port 3000) instead of poker (port 8088)
- Hid "CREATE ACCOUNT" button, replaced with "To create an account, contact the administrator"
- Blocked /register route via nginx
- Multiple bug fix topics opened: login, game not starting, stand up bug, buy-in visibility, chat UI, lobby real-time, admin panel + balances + history
- Card back changed to logo
- DuckDNS token: 18528b55-8ebc-4658-ade1-9babbabe2e6f

## Swarm Agent System — Major Evolution
### Problems Identified:
- Agents worked in isolation, no inter-agent communication
- Agent Chat (thread 479) was empty
- Agents didn't always report to Telegram (silent sessions)
- Orchestrator (me) kept doing tasks directly instead of delegating
- SYSTEM.md was too long (250+ lines), agents didn't follow all protocols

### Solutions Built:
1. **Agent identity via bots** — each agent has own Telegram bot (shomer, koder, tzayar, worker)
2. **Avatar images** generated with Nano Banana Pro for each agent
3. **Visible Telegram messages** — agents must use send.sh (internal session msgs not visible)
4. **Confirmation step** — agents ask "❓ להתחיל? או לשנות משהו?" before working
5. **Code Review** — שומר reviews git diff after every code change
6. **3-Strike Rollback** — 3 failed fix attempts → auto rollback to safe commit
7. **Task State Persistence** — save progress to swarm/memory/task-<thread>.md
8. **Active Monitoring** — heartbeat checks tasks.json for stuck agents
9. **Priority Queue** — urgent/high/normal/low in tasks.json
10. **Daily Summary** — daily-summary.sh script
11. **Auto Push to GitHub** — post-commit hook
12. **Agent Ratings** — ratings.json tracks success/failure per agent
13. **Cancel support** — "ביטול" stops + rollback

### Dashboard
- Built at https://tworkswarm.duckdns.org (port 8090, systemd service)
- Separate domain from poker (Yossi insisted — correct!)
- Shows agents, tasks, logs, stats

### Sandbox Environment
- Agents must work on /root/sandbox/ copy, never on production directly
- sandbox.sh: create/test/apply/destroy
- Port mapping: production → sandbox (8088→9088, 7001→9001, etc.)

### Enforcement (v4)
- enforce.sh: pre-work, post-work, review, check-sandbox → PASS/FAIL
- SYSTEM.md shortened to ~60 lines, 3 iron rules: SANDBOX, PROOF, REPORT
- Orchestrator runs enforce.sh at each checkpoint

### Inspired by Community Skills:
- Cognitive Memory → Vault (permanent memories)
- Joko Orchestrator → Plan Review + Guardrails
- CC GodMode → Dual Quality Gates, Workflows, 8 specialized agents

## New Project: Betting Platform
- Spec created with Gemini, reviewed and enhanced
- APIs: The Odds API (key: f9de4eb...) + SportScore/RapidAPI
- Stack: Node.js + Express + MongoDB + Redis + Socket.io + Vue.js
- Path: /root/BettingPlatform
- Features: real-time odds, multi-bet/parlay, cashout, settlement engine
- 3-tier users: admin → agent → player (same as poker)

## GitHub
- Swarm repo: https://github.com/Yosi2377/swarm

## Projects Table Updated in MEMORY.md
| Project | Folder | Domain | Ports |
|---------|--------|--------|-------|
| פוקר | /root/TexasPokerGame | zozopoker.duckdns.org | 8088+7001 |
| בלאקג'ק | /root/Blackjack-Game-Multiplayer | 95.111.247.22:3000 | 3000 |
| הימורים | /root/BettingPlatform | TBD | 3001+3002+8089 |
| Dashboard | swarm/dashboard/ | tworkswarm.duckdns.org | 8090 |

## Key Lesson
Yossi caught me multiple times answering directly instead of delegating to agents. Rule is absolute: NEVER answer tasks in General, ALWAYS create topic + delegate. Even "small" tasks.
