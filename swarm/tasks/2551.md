# Task 2551 â€” ×œ×ž×™×“×” ×ž×›×œ ×˜×¢×•×ª + ×”×¦×œ×—×”

## ×ž×˜×¨×”
×”×¡×•×›× ×™× ×—×™×™×‘×™× ×œ×œ×ž×•×“ ×ª×ž×™×“ â€” ×ž×›×œ ×›×™×©×œ×•×Ÿ ×•×ž×›×œ ×”×¦×œ×—×”.

## ×©×™× ×•×™×™× × ×“×¨×©×™×

### 1. auto-flow.sh â€” learn on EVERY eval result
```bash
# After EVERY failed eval (not just Phase 2):
learn.sh lesson "$AGENT" "medium" "Eval failed on #$THREAD attempt $RETRY" "Error: $EVAL_OUTPUT"

# After EVERY successful eval:
learn.sh lesson "$AGENT" "low" "Task #$THREAD completed successfully" "What worked: $DESC"
learn.sh score "$AGENT" success  # Update score

# After EVERY failed eval:
learn.sh score "$AGENT" fail  # Update score
```

### 2. auto-flow.sh â€” inject lessons BEFORE agent starts
```bash
# Before sending task to agent, query relevant lessons:
LESSONS=$(swarm/learn.sh query "$DESC" 2>/dev/null | head -10)

# Include in agent activation message:
"ðŸ’¡ ×œ×§×—×™× ×ž×”×¢×‘×¨:
$LESSONS
âš ï¸ ×©×™× ×œ×‘ ×œ×˜×¢×•×™×•×ª ×”××œ×”!"
```

### 3. evaluator.sh â€” save detailed error output
```bash
# Save EVERY eval output (success or fail) to:
echo "$EVAL_OUTPUT" >> swarm/learning/eval-history-${THREAD}.log
# Save errors specifically:
echo "$ERRORS" > /tmp/eval-errors-${THREAD}.txt
```

### 4. SYSTEM.md â€” agents must call learn.sh at start AND end
```
## Before starting: learn.sh query "keywords"
## After finishing: learn.sh lesson <agent> <severity> "what" "learned"
```

### 5. learn.sh â€” add "score" command if missing
```bash
learn.sh score <agent> success  # increments success count
learn.sh score <agent> fail     # increments fail count
```

## Tests
- bash -n /root/.openclaw/workspace/swarm/auto-flow.sh â†’ no syntax errors
- bash -n /root/.openclaw/workspace/swarm/evaluator.sh â†’ no syntax errors  
- /root/.openclaw/workspace/swarm/learn.sh query "test" â†’ returns results
- /root/.openclaw/workspace/swarm/learn.sh lesson koder low "test lesson" "test" â†’ saves
- grep -q "learn.sh" /root/.openclaw/workspace/swarm/auto-flow.sh â†’ found in multiple places
- /root/.openclaw/workspace/swarm/test-runner.sh dashboard 2408 â†’ PASS
