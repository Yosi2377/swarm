{
  "version": 1,
  "lessons": [
    {
      "id": "54e36a54",
      "agent": "or",
      "severity": "critical",
      "impact": 1.0,
      "what": "Pushed code directly to production without sandbox",
      "lesson": "ALWAYS work in sandbox first, never push to production without user approval",
      "timestamp": "2026-02-15T04:03:55Z",
      "applied": 32
    },
    {
      "id": "e82efb93",
      "agent": "or",
      "severity": "critical",
      "impact": 1.0,
      "what": "Didn't create topic for task",
      "lesson": "EVERY task gets its own Telegram topic, no exceptions",
      "timestamp": "2026-02-15T04:03:55Z",
      "applied": 29
    },
    {
      "id": "eeb50f4e",
      "agent": "or",
      "severity": "medium",
      "impact": 0.7,
      "what": "Didn't send screenshots as proof",
      "lesson": "Always take screenshots with Puppeteer and send to topic before asking for approval",
      "timestamp": "2026-02-15T04:03:55Z",
      "applied": 1
    },
    {
      "id": "5f36b13a",
      "agent": "or",
      "severity": "medium",
      "impact": 0.7,
      "what": "Orchestrator coded instead of delegating to koder",
      "lesson": "Orchestrator must DELEGATE to agents, never code directly",
      "timestamp": "2026-02-15T04:03:55Z",
      "applied": 0
    },
    {
      "id": "1fd332a1",
      "agent": "koder",
      "severity": "medium",
      "impact": 0.7,
      "what": "isBall variable undefined in modal tabs",
      "lesson": "Always check variable scope when using variables in array definitions",
      "timestamp": "2026-02-15T04:03:55Z",
      "applied": 29
    },
    {
      "id": "29193cd3",
      "agent": "koder",
      "severity": "medium",
      "impact": 0.7,
      "what": "Route order bug - full-odds after :eventId",
      "lesson": "Specific routes must come BEFORE parameterized routes in Express",
      "timestamp": "2026-02-15T04:03:55Z",
      "applied": 29
    },
    {
      "id": "6c6f0d33",
      "agent": "koder",
      "severity": "low",
      "impact": 0.3,
      "what": "trust proxy not set for rate limiter",
      "lesson": "Behind nginx, always set app.set('trust proxy', 1) for express-rate-limit",
      "timestamp": "2026-02-15T04:03:56Z",
      "applied": 29
    },
    {
      "id": "ad647fff",
      "agent": "or",
      "severity": "critical",
      "impact": 1.0,
      "what": "Koder deployed dashboard changes directly without waiting for user approval",
      "lesson": "Even for non-production services like the dashboard, WAIT for user approval before deploying. The flow is: screenshots â†’ user reviews â†’ user approves â†’ deploy.",
      "timestamp": "2026-02-15T04:13:47Z",
      "applied": 31
    },
    {
      "id": "611b3199",
      "agent": "koder",
      "severity": "critical",
      "impact": 1.0,
      "what": "commenceTime saved as string not Date object",
      "lesson": "Always use new Date() when saving dates to MongoDB, not toString(). Mongoose won't auto-convert strings to Date type.",
      "timestamp": "2026-02-15T11:53:28Z",
      "applied": 29
    },
    {
      "id": "bdf77ff4",
      "agent": "koder",
      "severity": "critical",
      "impact": 1.0,
      "what": "limit(100) blocked events from loading",
      "lesson": "Never use hard limit() on queries that may return more results. Use pagination or remove limit for admin/internal queries.",
      "timestamp": "2026-02-15T11:53:28Z",
      "applied": 29
    },
    {
      "id": "70b8ae5a",
      "agent": "koder",
      "severity": "medium",
      "impact": 0.7,
      "what": "rate limit exceeded from 300ms delay between API calls",
      "lesson": "When calling external APIs in loops, use at least 500ms delay. For bulk operations, use 1000ms+ or batch endpoints.",
      "timestamp": "2026-02-15T11:53:28Z",
      "applied": 29
    },
    {
      "id": "6a400dc4",
      "agent": "koder",
      "severity": "medium",
      "impact": 0.7,
      "what": "stale events not marked completed after date passed",
      "lesson": "Add a cleanup job or query filter: if event.commenceTime < now and status is not completed, auto-mark or filter out.",
      "timestamp": "2026-02-15T11:53:28Z",
      "applied": 29
    },
    {
      "id": "f706aebd",
      "agent": "koder",
      "severity": "low",
      "impact": 0.3,
      "what": "success #2551",
      "lesson": "×œ×ž×™×“×” ×ž×›×œ ×˜×¢×•×ª + ×”×¦×œ×—×”",
      "timestamp": "2026-02-15T13:20:23Z",
      "applied": 27
    },
    {
      "id": "13111560",
      "agent": "koder",
      "severity": "low",
      "impact": 0.3,
      "what": "success #2572",
      "lesson": "auto-commit ×—×•×‘×”",
      "timestamp": "2026-02-15T13:34:04Z",
      "applied": 26
    },
    {
      "id": "01a8a26d",
      "agent": "koder",
      "severity": "high",
      "impact": 0.3,
      "what": "Failed 3 times on #2592",
      "lesson": "Errors: ðŸ” Evaluating thread 2592 for agent koder...\nâŒ FAIL: Uncommitted changes in workspace: 5 files\nðŸ” Evaluating thread 2592 for agent koder...\nâŒ FAIL: Uncommitted changes in workspace: 4 files\nðŸ” Evaluating thread 2592 for agent koder...\nâŒ FAIL: Uncommitted changes in workspace: 4 files",
      "timestamp": "2026-02-15T13:45:01Z",
      "applied": 25
    },
    {
      "id": "3efb8e13",
      "agent": "koder",
      "severity": "critical",
      "impact": 1.0,
      "what": "Failed both phases on #2592 (×‘×“×™×§×•×ª Browser ××ž×™×ª×™×•×ª)",
      "lesson": "Total 6 retries exhausted",
      "timestamp": "2026-02-15T13:51:34Z",
      "applied": 25
    },
    {
      "id": "a5ce7a55",
      "agent": "koder",
      "severity": "high",
      "impact": 0.3,
      "what": "Failed 3 times on #2656",
      "lesson": "Errors: ðŸ” Evaluating thread 2656 for agent koder...\nâŒ FAIL: Uncommitted changes in workspace: 2 files\nðŸ” Evaluating thread 2656 for agent koder...\nâŒ FAIL: Uncommitted changes in workspace: 3 files\nðŸ” Evaluating thread 2656 for agent koder...\nâŒ FAIL: Uncommitted changes in workspace: 3 files",
      "timestamp": "2026-02-15T14:20:47Z",
      "applied": 24
    },
    {
      "id": "e995175c",
      "agent": "koder",
      "severity": "high",
      "impact": 0.3,
      "what": "Failed 3 times on #2809",
      "lesson": "Errors: \nAfter doing this, you may fix the identity used for this commit with:\n\n    git commit --amend --reset-author\n\n 3 files changed, 22 insertions(+), 4 deletions(-)\nðŸ“‹ Running tests (project: betting)...\n\nPASS: 5/5 tests passed\nðŸŒ Running browser tests...\n\nPASS: 0/0 browser tests passed\nðŸ§ª Running feature-specific browser tests...\n  ðŸ“ Testing URL: http://95.111.247.22:9089\n  âŒ ××™×¨×•×¢×™× ×ž×•×¤×™×¢×™× â€” selector \".event-row, tr\" not found\n  âŒ ××™×Ÿ ××™×¨×•×¢×™× ×©× ×’×ž×¨×• ×‘×˜×‘×œ×” â€” expected min undefined, found 0\n\nFAIL: 0/2 browser tests passed\n\nâŒ EVALUATION FAILED",
      "timestamp": "2026-02-15T15:24:41Z",
      "applied": 20
    },
    {
      "id": "0f520865",
      "agent": "koder",
      "severity": "low",
      "impact": 0.3,
      "what": "success #2965",
      "lesson": "×¡×™× ×•×Ÿ ×œ×™×’×•×ª ×›×“×•×¨×’×œ",
      "timestamp": "2026-02-15T16:06:18Z",
      "applied": 15
    },
    {
      "id": "e844ecef",
      "agent": "koder",
      "severity": "high",
      "impact": 0.3,
      "what": "Failed 3 times on #3009",
      "lesson": "Errors: \nFAIL: 0/2 browser tests passed\n\nðŸ” ========== INVESTIGATION ==========\n\nðŸ©º Diagnosis:\n   ðŸ“ Current URL: http://95.111.247.22:9089/\n   ðŸ“„ Page title: \"ZozoBet - Premium Sports Betting\"\n   âœ… User is logged in\n   ðŸ“ Page text (first 200 chars): \"âš½ ×¡×¤×•×¨×˜ ðŸ”´ ×œ×™×™×Ÿ ×¨×¥ 162 ðŸŽ« ×”×”×™×ž×•×¨×™× ×©×œ×™ ðŸ“Š ×ª×•×¦××•×ª ðŸ“ˆ ×¡×˜×˜×™×¡×˜×™×§×” âš™ï¸ × ×™×”×•×œ ðŸ‘¤ Zozo ×™×ª×¨×” 5102.02â‚ª 15.2, 19:01:56 EN/HE ×™×¦×™××” ×¢× ×¤×™ ×¡×¤×•×¨×˜ ðŸ† ×”×›×œ 637 ðŸŽ¾ Challenger New Delhi 266 âš½ England Premier League 44 âš½ \"\n   ðŸ“Š Elements on page: {\"tr\":0,\"td\":0,\"div\":3022,\"button\":11,\"table\":0,\"form\":0,\"a\":11,\"img\":2,\"modal\":0}\n      ðŸ”Ž Similar classes found: c-match\n      âŒ \"×œ×—×™×¦×” ×¢×œ ×ž×©×—×§ ×¤×•×ª×—×ª ×ž×•×“×œ\": selector \".match-row\" not found\n      âŒ \"×™×© ×™×•×ª×¨ ×ž×§×• ××—×“\": selector \".totals-line, .total-row\" not found\n   ðŸ“¸ Screenshot: /tmp/eval-diagnosis.png\n\nðŸ’¡ ========== SUGGESTED FIXES ==========\n   â†’ Expected 2+ elements but found fewer. Check: is data loading? Is the API returning results? Is the DOM being populated?\n\nâŒ EVALUATION FAILED",
      "timestamp": "2026-02-15T18:02:11Z",
      "applied": 15
    },
    {
      "id": "857d061f",
      "agent": "koder",
      "severity": "low",
      "impact": 0.3,
      "what": "success #3009",
      "lesson": "×§×•×•×™× ×ž×¨×•×‘×™× - frontend",
      "timestamp": "2026-02-15T18:36:06Z",
      "applied": 13
    },
    {
      "id": "45076057",
      "agent": "koder",
      "severity": "low",
      "impact": 0.3,
      "what": "success #3247",
      "lesson": "sidebar count + no-cache",
      "timestamp": "2026-02-16T05:18:51Z",
      "applied": 6
    },
    {
      "id": "8fe7d6f2",
      "agent": "koder",
      "severity": "low",
      "impact": 0.3,
      "what": "success #3272",
      "lesson": "×¡×™× ×•×Ÿ U19/Femenil",
      "timestamp": "2026-02-16T05:23:58Z",
      "applied": 5
    },
    {
      "id": "3f517e88",
      "agent": "shomer",
      "severity": "low",
      "impact": 0.3,
      "what": "zozobet security scan",
      "lesson": "ZozoBet headers good except missing CSP and server version exposed. SSL valid 87 days. Backend on localhost only. Rate limiter active at 200/window.",
      "timestamp": "2026-02-16T05:53:30Z",
      "applied": 0
    },
    {
      "id": "6903e4b9",
      "agent": "koder",
      "severity": "low",
      "impact": 0.3,
      "what": "success #3364",
      "lesson": "header blue",
      "timestamp": "2026-02-16T05:55:07Z",
      "applied": 2
    },
    {
      "id": "284f6bb6",
      "agent": "koder",
      "severity": "low",
      "impact": 0.3,
      "what": "success #3396",
      "lesson": "bet365 redesign",
      "timestamp": "2026-02-16T06:09:14Z",
      "applied": 1
    },
    {
      "id": "75a0baa0",
      "agent": "koder",
      "severity": "low",
      "impact": 0.3,
      "what": "#3822 completed",
      "lesson": "Task '×ª×™×§×•×Ÿ ×œ×™×™×Ÿ ×¨×¥ â€” ×–×ž× ×™× + ×ž×©×—×§×™× ×’×ž×•×¨×™×' passed all gates",
      "timestamp": "2026-02-16T20:13:50Z",
      "applied": 0
    },
    {
      "id": "b16b679a",
      "agent": "koder",
      "severity": "low",
      "impact": 0.3,
      "what": "admin-reset-ui-tuesday",
      "lesson": "Updated admin.html reset UI: tooltip, next-Tuesday display, confirm dialogs with 30-day message",
      "timestamp": "2026-02-18T03:12:02Z",
      "applied": 0
    },
    {
      "id": "422669c1",
      "agent": "koder",
      "severity": "low",
      "impact": 0.3,
      "what": "history reset keeps 30 days",
      "lesson": "Changed DELETE /users/:id/bets and POST /periods/reset to only delete bets older than 30 days. Added Tuesday auto-reset cron in index.js and GET /api/admin/next-reset endpoint.",
      "timestamp": "2026-02-18T03:12:21Z",
      "applied": 0
    },
    {
      "id": "4513a190",
      "agent": "bodek",
      "severity": "low",
      "impact": 0.3,
      "what": "reset deletes only old bets",
      "lesson": "Period reset API correctly deletes bets older than 30 days and preserves recent ones. deletedOldBets count in response is accurate.",
      "timestamp": "2026-02-18T03:25:58Z",
      "applied": 0
    },
    {
      "id": "8fa9fcab",
      "agent": "koder",
      "severity": "low",
      "impact": 0.3,
      "what": "socket.io backend upgrade",
      "lesson": "Added socket.io WebSocket + 4 new API endpoints to dashboard server.js. Key: use http.createServer + Server(io) pattern, keep SSE for backward compat",
      "timestamp": "2026-02-18T03:55:00Z",
      "applied": 0
    },
    {
      "id": "5491d5aa",
      "agent": "koder",
      "severity": "low",
      "impact": 0.3,
      "what": "Dashboard cyberpunk redesign",
      "lesson": "Matrix rain canvas + CSS animations + glassmorphism work well together. Key: preserve all API fetch logic, only change presentation layer.",
      "timestamp": "2026-02-18T03:56:20Z",
      "applied": 0
    },
    {
      "id": "7520358c",
      "agent": "tzayar",
      "severity": "low",
      "impact": 0.3,
      "what": "dashboard assets generation",
      "lesson": "Generated 9 cyberpunk assets with Nano Banana Pro. API key found in openclaw.json skills.entries, not auto-injected to env - need to export manually. Sequential generation works reliably.",
      "timestamp": "2026-02-18T03:57:01Z",
      "applied": 0
    },
    {
      "id": "0c3f99aa",
      "agent": "koder",
      "severity": "medium",
      "impact": 0.7,
      "what": "browser-eval selectors were broken",
      "lesson": "browser-eval.js default tests: when run without test file, uses built-in sanity checks (.c-match, .bal, body, noErrors). Selectors: .oc->.c-odds, .match-row->.c-match, .event-row->.c-match, .totals-line/.total-row->.b365-row",
      "timestamp": "2026-02-18T04:22:25Z",
      "applied": 0
    },
    {
      "id": "2e122e16",
      "agent": "or",
      "severity": "critical",
      "impact": 1.0,
      "what": "self-heal failed: false",
      "lesson": "Command failed 3 times. Log: /tmp/heal-20260218-060328.log",
      "timestamp": "2026-02-18T05:03:29Z",
      "applied": 0
    },
    {
      "id": "6b8399da",
      "agent": "koder",
      "severity": "medium",
      "impact": 0.7,
      "what": "created self-heal.sh",
      "lesson": "Retry wrapper with alert+logging on exhaustion. Added to SYSTEM.md tools section.",
      "timestamp": "2026-02-18T05:03:38Z",
      "applied": 0
    },
    {
      "id": "66a139c6",
      "agent": "koder",
      "severity": "medium",
      "impact": 0.7,
      "what": "Git Branch Per Task",
      "lesson": "Created branch-task.sh and merge-task.sh scripts. Integrated into pipeline.sh initâ†’branch, doneâ†’merge. Key: always use --no-ff for merge history, abort on conflicts.",
      "timestamp": "2026-02-18T05:03:42Z",
      "applied": 0
    },
    {
      "id": "81caa2c8",
      "agent": "koder",
      "severity": "medium",
      "impact": 0.7,
      "what": "keyword search was too rigid",
      "lesson": "Semantic TF-IDF search with severity weighting finds relevant lessons even without exact keyword match. Handle messy data formats with normalize functions.",
      "timestamp": "2026-02-18T05:04:24Z",
      "applied": 0
    },
    {
      "id": "8e6e9bea",
      "agent": "koder",
      "severity": "medium",
      "impact": 0.7,
      "what": "Created delegate.sh and check-delegations.sh",
      "lesson": "Keep delegation scripts simple - JSON queue in /tmp with send.sh notification works well",
      "timestamp": "2026-02-18T05:14:37Z",
      "applied": 0
    },
    {
      "id": "84f861bf",
      "agent": "koder",
      "severity": "medium",
      "impact": 0.7,
      "what": "Created pr-review.sh for PR workflow",
      "lesson": "Script takes TASK_ID BRANCH_NAME SUMMARY, gets diff, screenshots, sends to General with approve/reject buttons",
      "timestamp": "2026-02-18T05:14:55Z",
      "applied": 0
    },
    {
      "id": "3f21609e",
      "agent": "koder",
      "severity": "medium",
      "impact": 0.7,
      "what": "Created snapshot.sh for auto rollback",
      "lesson": "Use chattr -i before restore and +i after to handle immutable production files. Always mongodump for DB backup.",
      "timestamp": "2026-02-18T05:15:05Z",
      "applied": 0
    },
    {
      "id": "2d69e025",
      "agent": "koder",
      "severity": "medium",
      "impact": 0.7,
      "what": "gen-tests.sh extracts classes/IDs from HTML",
      "lesson": "Must filter template literals (${...}) from grep results â€” they are JS expressions not valid CSS selectors",
      "timestamp": "2026-02-18T05:15:14Z",
      "applied": 0
    },
    {
      "id": "1efc02cf",
      "agent": "or",
      "severity": "critical",
      "impact": 1.0,
      "what": "self-heal failed: ls /root/.openclaw/workspace",
      "lesson": "Command failed 2 times. Log: /tmp/heal-20260218-062055.log",
      "timestamp": "2026-02-18T05:20:55Z",
      "applied": 0
    },
    {
      "id": "2fd859d1",
      "agent": "koder",
      "severity": "medium",
      "impact": 0.7,
      "what": "fixed self-heal.sh, gen-tests.sh, added pipeline to SYSTEM.md",
      "lesson": "self-heal: removed set -e, capture exit code explicitly with rc=0; cmd || rc=$?. gen-tests: route admin files to admin.html, limit 15 tests with priority selectors. Pipeline section added to SYSTEM.md.",
      "timestamp": "2026-02-18T05:24:38Z",
      "applied": 0
    },
    {
      "id": "0c939fe4",
      "agent": "or",
      "severity": "critical",
      "impact": 1.0,
      "what": "self-heal failed: echo hello_world",
      "lesson": "Command failed 3 times. Log: /tmp/heal-20260218-062638.log",
      "timestamp": "2026-02-18T05:26:38Z",
      "applied": 0
    },
    {
      "id": "941d225a",
      "agent": "koder",
      "severity": "medium",
      "impact": 0.7,
      "what": "Added version to footer via pipeline",
      "lesson": "Full pipeline: branchâ†’codeâ†’restartâ†’gen-testsâ†’screenshotâ†’merge. Task 5000.",
      "timestamp": "2026-02-18T05:30:43Z",
      "applied": 0
    },
    {
      "id": "c8d83dc2",
      "agent": "koder",
      "severity": "medium",
      "impact": 0.7,
      "what": "Task 5001: Added tooltip to login button",
      "lesson": "Pipeline: branchâ†’codeâ†’testâ†’screenshotâ†’merge. Errors: tests-partial",
      "timestamp": "2026-02-18T05:36:41Z",
      "applied": 0
    },
    {
      "id": "6b62d032",
      "agent": "bodek",
      "severity": "low",
      "impact": 0.3,
      "what": "Audit test",
      "lesson": "All tools verified",
      "timestamp": "2026-02-18T05:45:37Z",
      "applied": 0
    },
    {
      "id": "4fa11686",
      "agent": "seo",
      "severity": "medium",
      "impact": 0.7,
      "what": "Pipeline error: tests-partial in task 5300",
      "lesson": "Auto-recorded by pipeline. Fix: investigate tests-partial pattern.",
      "timestamp": "2026-02-18T07:30:04Z",
      "applied": 0
    },
    {
      "id": "4ebd89a9",
      "agent": "koder",
      "severity": "medium",
      "impact": 0.7,
      "what": "Task 5500: Backend: 6 market groups â€” cards, player shots, BetBoost, goals range, corners, minutes",
      "lesson": "Pipeline: branchâ†’codeâ†’testâ†’screenshotâ†’merge. Errors: none",
      "timestamp": "2026-02-18T07:59:54Z",
      "applied": 0
    },
    {
      "id": "d810b85e",
      "agent": "koder",
      "severity": "critical",
      "impact": 1.0,
      "what": "Koder reported 'fixed' 3 times while bug was still visible in screenshots",
      "lesson": "Must LOOK at screenshots before reporting done. Compare BEFORE vs AFTER. If they look the same â€” not fixed.",
      "timestamp": "2026-02-19T09:16:14Z",
      "applied": 0
    },
    {
      "id": "719f827f",
      "agent": "or",
      "severity": "critical",
      "impact": 1.0,
      "what": "Orchestrator waits for Yossi to ask 'what happened' instead of proactively updating",
      "lesson": "After spawning an agent: set a reminder/check after 3-5 min and proactively report to General. NEVER wait for user to ask for status.",
      "timestamp": "2026-02-19T09:20:53Z",
      "applied": 0
    },
    {
      "id": "8c5a93e8",
      "agent": "koder",
      "severity": "critical",
      "impact": 1.0,
      "what": "Period filtering failed - relied only on matchPeriod",
      "lesson": "Use multiple fallbacks: matchPeriod + matchMinute + scores estimation",
      "timestamp": "2026-02-19T12:44:44Z",
      "applied": 0
    },
    {
      "id": "3e98dd82",
      "agent": "or",
      "severity": "important",
      "impact": 0.3,
      "what": "Koder succeeds with exact code snippets",
      "lesson": "Always provide complete code in task prompt, not vague instructions",
      "timestamp": "2026-02-19T12:44:44Z",
      "applied": 0
    },
    {
      "id": "e804aa0d",
      "agent": "koder",
      "severity": "important",
      "impact": 0.3,
      "what": "BetsAPI basketball missing matchPeriod",
      "lesson": "Frontend must estimate quarter from total score when period field is empty",
      "timestamp": "2026-02-19T12:44:44Z",
      "applied": 0
    },
    {
      "id": "62904fba",
      "agent": "koder",
      "severity": "important",
      "impact": 0.3,
      "what": "Built bet delay + odds protection",
      "lesson": "409 odds_changed/odds_stale pattern prevents arbitrage between bet365 and ZozoBet",
      "timestamp": "2026-02-19T12:44:44Z",
      "applied": 0
    },
    {
      "id": "737c4ea8",
      "agent": "koder",
      "severity": "important",
      "impact": 0.3,
      "what": "Built watched events fast polling",
      "lesson": "Frontend POST /watch + backend in-memory TTL + aggregator 10s sync for watched events only",
      "timestamp": "2026-02-19T12:44:44Z",
      "applied": 0
    },
    {
      "id": "7e320630",
      "agent": "koder",
      "severity": "critical",
      "impact": 1.0,
      "what": "koder worked directly on production instead of sandbox",
      "lesson": "NEVER work on production files directly. Always sandbox first, then copy to production only with user approval. The koder-fix-islive task modified production files â€” this violates the iron rule.",
      "timestamp": "2026-02-19T19:53:50Z",
      "applied": 0
    },
    {
      "id": "7ef773ab",
      "agent": "koder",
      "severity": "medium",
      "impact": 0.7,
      "what": "Timer desync after tab background",
      "lesson": "Clear clocks object on visibilitychange to force re-sync from server data",
      "timestamp": "2026-02-20T10:45:10Z",
      "applied": 0
    }
  ]
}