# Task 2572 — auto-commit חובה בכל משימה

## בעיה
סוכנים לא עושים git commit אחרי עבודה. שינויים נשארים uncommitted.

## פתרון

### 1. evaluator.sh — הוסף בדיקת uncommitted changes
```bash
# Check for uncommitted changes in workspace
cd /root/.openclaw/workspace
UNCOMMITTED=$(git status --porcelain | wc -l)
if [ "$UNCOMMITTED" -gt 0 ]; then
  fail "Uncommitted changes in workspace: $UNCOMMITTED files"
fi
```

### 2. auto-flow.sh — auto-commit after PASS
```bash
# After evaluator PASS, before sending to user:
cd /root/.openclaw/workspace
if [ $(git status --porcelain | wc -l) -gt 0 ]; then
  git add -A
  git commit -m "#$THREAD: $DESC (agent: $AGENT)"
fi
```

### 3. SYSTEM.md — הוסף חובת commit
```
## ⛔ GIT COMMIT — חובה!
אחרי כל שינוי קוד:
git add -A && git commit -m "#THREAD: תיאור קצר"
```

## Tests
- bash -n /root/.openclaw/workspace/swarm/auto-flow.sh
- bash -n /root/.openclaw/workspace/swarm/evaluator.sh
- grep -q "git commit\|git add" /root/.openclaw/workspace/swarm/auto-flow.sh
- grep -q "git commit\|uncommitted" /root/.openclaw/workspace/swarm/evaluator.sh
