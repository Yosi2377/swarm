# Task 2357 — דיווח אוטומטי + מוניטורינג סוכנים

## הבעיה
1. סוכנים לא מדווחים התקדמות — יוסי צריך לשאול כל פעם "מה קורה?"
2. אין מוניטור שמזהה סוכן תקוע

## פתרון 1: דיווח אוטומטי (progress reporter)

### progress.sh — דיווח כל 3 דקות
```bash
#!/bin/bash
# progress.sh <agent_id> <thread_id> <task_description>
# Runs in background, every 3 minutes:
# 1. Checks git diff --stat in sandbox → counts changed files/lines
# 2. Checks if sandbox service is running
# 3. Posts short update to Telegram topic via send.sh
# 4. If no changes for 6 minutes → alerts orchestrator
```

### שילוב ב-SYSTEM.md:
כשסוכן מתחיל לעבוד, הוא מפעיל:
```bash
swarm/progress.sh <agent_id> <thread_id> "task description" &
PROGRESS_PID=$!
# ... work ...
kill $PROGRESS_PID  # stop when done
```

## פתרון 2: מוניטור אורקסטרטור (HEARTBEAT.md)

### עדכן HEARTBEAT.md:
בכל heartbeat:
1. בדוק active tasks ב-tasks.json
2. לכל task פעיל — בדוק:
   - מתי עודכן לאחרונה?
   - יש git diff ב-sandbox?
   - ה-session עדיין פעיל?
3. אם task לא עודכן 10+ דקות:
   - שלח ping לסוכן via sessions_send
   - אם עדיין לא עונה → הפעל מחדש
4. דווח ליוסי סטטוס כל 15 דקות (רק אם יש tasks פעילים)

## פתרון 3: הודעה ליוסי אוטומטית

### auto-update.sh:
כשסוכן מסיים — שלח הודעה ל-General אוטומטית:
```bash
send.sh or 1 "✅ סוכן X סיים משימה #Y — [סיכום]. לדחוף לפרודקשן?"
```
הסוכן לא צריך לחכות שאור ידווח — ההודעה נשלחת אוטומטית.

## קבצים ליצור/לעדכן
- `swarm/progress.sh` — חדש
- `swarm/auto-update.sh` — חדש  
- `swarm/SYSTEM.md` — הוסף progress.sh בworkflow
- `swarm/HEARTBEAT.md` — הוסף task monitoring
- `swarm/ORCHESTRATOR.md` — הוסף auto-update flow
